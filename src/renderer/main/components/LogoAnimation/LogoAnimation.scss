@import '../../../shared/styles/variables.scss';

$cyan: #4dc9ff;
$cyan-glow: 0 0 10px rgba(77, 201, 255, 0.8), 0 0 20px rgba(77, 201, 255, 0.4);
$cyan-glow-strong: 0 0 15px rgba(77, 201, 255, 1), 0 0 30px rgba(77, 201, 255, 0.6), 0 0 45px rgba(77, 201, 255, 0.3);

.logo-animation-container {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 500px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  perspective: 1000px;
}

// HUD Frame
.hud-frame {
  position: absolute;
  inset: 20px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.5s ease-in;

  &.visible {
    opacity: 1;
  }
}

.hud-corner {
  position: absolute;
  width: 100px;
  height: 100px;

  &.top-left {
    top: 0;
    left: 0;
  }

  &.top-right {
    top: 0;
    right: 0;
  }

  &.bottom-left {
    bottom: 0;
    left: 0;
  }

  &.bottom-right {
    bottom: 0;
    right: 0;
  }

  .corner-svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow($cyan-glow);
  }
}

.hud-top-bar {
  position: absolute;
  top: 0;
  left: 110px;
  right: 110px;
  height: 20px;
  display: flex;
  align-items: center;
  gap: 10px;

  .bar-segment {
    flex: 1;
    height: 2px;
    background: linear-gradient(90deg, transparent, $cyan, transparent);
    opacity: 0.5;
  }

  .bar-data {
    padding: 0 15px;
    font-family: monospace;
    font-size: 10px;
    color: $cyan;
    text-shadow: $cyan-glow;
    white-space: nowrap;
  }
}

.hud-gauge {
  position: absolute;
  bottom: 30px;
  left: 30px;
  display: flex;
  align-items: center;
  gap: 15px;

  .gauge-svg {
    width: 70px;
    height: 70px;
    filter: drop-shadow($cyan-glow);
    animation: gauge-rotate 10s linear infinite;
  }

  .gauge-bar {
    width: 120px;
    height: 8px;
    background: rgba($cyan, 0.2);
    border: 1px solid $cyan;
    border-radius: 4px;
    position: relative;
    overflow: hidden;

    .bar-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 75%;
      background: linear-gradient(90deg, $cyan, rgba($cyan, 0.5));
      animation: bar-pulse 2s ease-in-out infinite;
    }

    .bar-text {
      position: absolute;
      right: -35px;
      top: 50%;
      transform: translateY(-50%);
      font-family: monospace;
      font-size: 10px;
      color: $cyan;
      text-shadow: $cyan-glow;
    }
  }
}

@keyframes gauge-rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes bar-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

// Logo wrapper - larger size
.logo-wrapper {
  position: absolute;
  width: 400px;
  height: 480px;
  transform-style: preserve-3d;
  transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);

  // Centered initially
  &.phase-idle,
  &.phase-spinning,
  &.phase-revealing {
    transform: translateX(0) translateY(0);
  }

  // Move to right
  &.phase-moving,
  &.phase-text,
  &.phase-initials,
  &.phase-complete {
    transform: translateX(250px) translateY(0);
  }

  // Spinning phase - different speeds for circle+shield vs cross
  &.phase-spinning {
    .aegis-circle,
    .aegis-shield {
      animation: spin-slow 1.5s ease-out forwards;
    }
    .aegis-cross {
      animation: spin-fast 1.5s ease-out forwards;
    }
  }
}

// Circle + Shield: slower rotation (4 full rotations)
@keyframes spin-slow {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(1440deg);
  }
}

// Cross: faster rotation (6 full rotations, same duration)
@keyframes spin-fast {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(2160deg);
  }
}

// Afterimages for motion blur effect
.afterimage {
  position: absolute;
  inset: 0;
  opacity: 0;
  animation: afterimage-fade 0.15s ease-out infinite;

  img {
    width: 100%;
    height: 100%;
    filter: drop-shadow($cyan-glow) blur(2px);
  }

  &.afterimage-1 {
    animation-delay: 0s;
    transform: rotateY(-15deg);
    opacity: 0.3;
  }

  &.afterimage-2 {
    animation-delay: 0.05s;
    transform: rotateY(-30deg);
    opacity: 0.2;
  }

  &.afterimage-3 {
    animation-delay: 0.1s;
    transform: rotateY(-45deg);
    opacity: 0.1;
  }
}

@keyframes afterimage-fade {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 0;
  }
}

// Main logo
.logo-main {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;

  .shield-outline,
  .eagle-content {
    position: absolute;
    inset: 0;

    img {
      width: 100%;
      height: 100%;
      filter: drop-shadow($cyan-glow-strong);
    }
  }

  .eagle-content {
    opacity: 0;
    transform: scale(0.9);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;

    &.visible {
      opacity: 1;
      transform: scale(1);
    }
  }

  // AEGIS Logo styles
  &.aegis-logo {
    .aegis-circle,
    .aegis-shield,
    .aegis-cross,
    .aegis-text {
      position: absolute;
      inset: 0;

      img {
        width: 100%;
        height: 100%;
        filter: drop-shadow($cyan-glow-strong);
      }
    }

    .aegis-text {
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;

      &.visible {
        opacity: 1;
        transform: scale(1);
      }
    }
  }
}

// SVG Container - appears above text
.svg-container {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 300px;
  height: 300px;
  z-index: 10;
  perspective: 1000px;
  opacity: 0;
  animation: svg-container-fadein 0.4s ease-out forwards;

  &.fade-out {
    animation: zoom-fade-out 0.2s ease-out forwards;
  }

  .aegis-svg {
    position: absolute;
    inset: 0;
    transform-style: preserve-3d;

    img {
      width: 100%;
      height: 100%;
      filter: drop-shadow($cyan-glow-strong);
    }

    &.circle,
    &.shield {
      &.spinning {
        .svg-main {
          animation: spin-y-axis-fadein 1s ease-in-out forwards;
        }

        // Afterimages for motion blur effect
        .svg-afterimage {
          position: absolute;
          inset: 0;
          pointer-events: none;
        }

        .afterimage-1 {
          animation: spin-afterimage-1-fadein 1s ease-in-out forwards;
        }

        .afterimage-2 {
          animation: spin-afterimage-2-fadein 1s ease-in-out forwards;
        }

        .afterimage-3 {
          animation: spin-afterimage-3-fadein 1s ease-in-out forwards;
        }
      }
    }

    &.cross {
      opacity: 0;
      animation: cross-appear 0.5s ease-out forwards;
    }
  }
}

// SVG Container fade-in animation
@keyframes svg-container-fadein {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

// Zoom and fade out animation
@keyframes zoom-fade-out {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.2);
  }
}

// Y-axis rotation animation (1 full rotation = 360deg)
@keyframes spin-y-axis {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(360deg);
  }
}

// Y-axis rotation animation with fade-in
@keyframes spin-y-axis-fadein {
  0% {
    transform: rotateY(0deg);
    opacity: 0;
  }
  20% {
    opacity: 0.3;
  }
  40% {
    opacity: 0.6;
  }
  60% {
    opacity: 0.8;
  }
  100% {
    transform: rotateY(360deg);
    opacity: 1;
  }
}

// Afterimage animations - slightly delayed rotations for motion blur
@keyframes spin-afterimage-1 {
  0% {
    transform: rotateY(0deg);
    opacity: 0.4;
  }
  100% {
    transform: rotateY(340deg);
    opacity: 0;
  }
}

@keyframes spin-afterimage-2 {
  0% {
    transform: rotateY(0deg);
    opacity: 0.3;
  }
  100% {
    transform: rotateY(320deg);
    opacity: 0;
  }
}

@keyframes spin-afterimage-3 {
  0% {
    transform: rotateY(0deg);
    opacity: 0.2;
  }
  100% {
    transform: rotateY(300deg);
    opacity: 0;
  }
}

// Afterimage animations with fade-in
@keyframes spin-afterimage-1-fadein {
  0% {
    transform: rotateY(0deg);
    opacity: 0;
  }
  20% {
    opacity: 0.15;
  }
  50% {
    opacity: 0.3;
  }
  80% {
    opacity: 0.2;
  }
  100% {
    transform: rotateY(340deg);
    opacity: 0;
  }
}

@keyframes spin-afterimage-2-fadein {
  0% {
    transform: rotateY(0deg);
    opacity: 0;
  }
  20% {
    opacity: 0.1;
  }
  50% {
    opacity: 0.25;
  }
  80% {
    opacity: 0.15;
  }
  100% {
    transform: rotateY(320deg);
    opacity: 0;
  }
}

@keyframes spin-afterimage-3-fadein {
  0% {
    transform: rotateY(0deg);
    opacity: 0;
  }
  20% {
    opacity: 0.05;
  }
  50% {
    opacity: 0.2;
  }
  80% {
    opacity: 0.1;
  }
  100% {
    transform: rotateY(300deg);
    opacity: 0;
  }
}

// Cross appear animation
@keyframes cross-appear {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

// Text content
.text-content {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) translateY(20px);
  opacity: 0;
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  z-index: 5;

  &.fade-out {
    animation: zoom-fade-out 0.2s ease-out forwards;
  }

  &.visible {
    opacity: 1;
    transform: translate(-50%, -50%);

    // Word appear animation only when text-content is visible
    .app-name:not(.collect-initials) .word-line {
      animation: word-appear 0.3s ease-out forwards;
      animation-delay: var(--word-delay, 0s);
    }
  }

  .app-name {
    display: flex;
    flex-direction: column;
    gap: 10px;
    position: relative;
    min-height: 400px;

    .word-line {
      display: flex;
      align-items: baseline;
      height: 50px;
      position: relative;
      opacity: 0;

      .char {
        font-family: 'Orbitron', sans-serif;
        font-size: 42px;
        color: $cyan;
        text-shadow: $cyan-glow;
        display: inline-block;

        &.initial {
          font-weight: 600;
          text-shadow: $cyan-glow-strong;
        }

        &.rest {
          font-weight: 400;
        }
      }
    }

    // When collecting initials - initials move down, rest fades out
    &.collect-initials {
      // Keep word-lines visible
      .word-line {
        opacity: 1 !important;
        animation: none !important;
      }

      // Rest characters fade out
      .word-line .char.rest {
        animation: initial-rest-fadeout 0.6s ease-out forwards;
      }

      // Initials stay visible
      .word-line .char.initial {
        opacity: 1;
      }

      // Each initial moves to the bottom row (A.E.G.I.S. = 5 letters)
      .word-line:nth-child(1) .char.initial {
        animation: initial-move-1 0.8s ease-out forwards;
      }
      .word-line:nth-child(2) .char.initial {
        animation: initial-move-2 0.8s ease-out forwards;
      }
      .word-line:nth-child(3) .char.initial {
        animation: initial-move-3 0.8s ease-out forwards;
      }
      .word-line:nth-child(4) .char.initial {
        animation: initial-move-4 0.8s ease-out forwards;
      }
      .word-line:nth-child(5) .char.initial {
        animation: initial-move-5 0.8s ease-out forwards;
      }
    }
  }

  .initials-row {
    position: absolute;
    top: 280px;
    left: -2px;
    height: 60px;
    display: flex;
    align-items: center;
    opacity: 0;
    transition: opacity 0.5s ease-out 0.5s;

    &.visible {
      opacity: 1;

      .dot {
        animation: dot-appear 0.3s ease-out forwards;
      }

      // Position dots for A.E.G.I.S. (centered, +57px offset)
      .dot:nth-child(1) {
        animation-delay: 0.15s;
        position: absolute;
        left: 94px;
      }
      .dot:nth-child(2) {
        animation-delay: 0.3s;
        position: absolute;
        left: 136px;
      }
      .dot:nth-child(3) {
        animation-delay: 0.45s;
        position: absolute;
        left: 179px;
      }
      .dot:nth-child(4) {
        animation-delay: 0.6s;
        position: absolute;
        left: 198px;
      }
      .dot:nth-child(5) {
        animation-delay: 0.75s;
        position: absolute;
        left: 244px;
      }
    }

    .dot {
      font-family: 'Orbitron', sans-serif;
      font-size: 42px;
      font-weight: 700;
      color: $cyan;
      text-shadow: $cyan-glow-strong;
      opacity: 0;
    }
  }

  .subtitle {
    position: absolute;
    top: 330px;
    left: 51%;
    transform: translateX(-51%);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease-out;

    &.visible {
      opacity: 1;

      .subtitle-char {
        animation: char-appear 0.2s ease-out forwards;
        animation-delay: var(--char-delay, 0s);
      }
    }

    .subtitle-char {
      font-family: 'Orbitron', sans-serif;
      font-size: 18px;
      font-weight: 400;
      color: $cyan;
      text-shadow: $cyan-glow;
      opacity: 0;
      display: inline-block;
    }
  }
}

@keyframes char-slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes char-type-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes word-appear {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

// Separate animation for rest characters during initial collection
@keyframes initial-rest-fadeout {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes dot-appear {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes char-appear {
  from {
    opacity: 0;
    transform: translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Animations for initials moving to form A.E.G.I.S.
// 5 words, each word-line is 50px height + 10px gap = 60px spacing
// All initials move to same Y position, centered horizontally (+57px offset)
// Word 1 (Advanced) - starts at row 0
@keyframes initial-move-1 {
  from {
    transform: translateY(0) translateX(0);
    opacity: 1;
  }
  to {
    transform: translateY(280px) translateX(57px);
    opacity: 1;
  }
}

// Word 2 (Environment) - starts at row 60px
@keyframes initial-move-2 {
  from {
    transform: translateY(0) translateX(0);
    opacity: 1;
  }
  to {
    transform: translateY(220px) translateX(102px);
    opacity: 1;
  }
}

// Word 3 (Guard) - starts at row 120px
@keyframes initial-move-3 {
  from {
    transform: translateY(0) translateX(0);
    opacity: 1;
  }
  to {
    transform: translateY(160px) translateX(142px);
    opacity: 1;
  }
}

// Word 4 (Intelligence) - starts at row 180px
@keyframes initial-move-4 {
  from {
    transform: translateY(0) translateX(0);
    opacity: 1;
  }
  to {
    transform: translateY(100px) translateX(187px);
    opacity: 1;
  }
}

// Word 5 (System) - starts at row 240px
@keyframes initial-move-5 {
  from {
    transform: translateY(0) translateX(0);
    opacity: 1;
  }
  to {
    transform: translateY(40px) translateX(207px);
    opacity: 1;
  }
}

// Replay button
.replay-button {
  position: absolute;
  bottom: 30px;
  right: 30px;
  padding: 10px 20px;
  background: transparent;
  border: 1px solid $cyan;
  color: $cyan;
  font-family: monospace;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;

  &:hover {
    background: rgba($cyan, 0.2);
    box-shadow: $cyan-glow;
  }
}
